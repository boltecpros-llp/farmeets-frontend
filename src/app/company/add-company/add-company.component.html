<div class="container py-2" style="max-width:480px;">
  <form [formGroup]="form" (ngSubmit)="onSubmit()">
    <div class="mb-3">
      <label for="name" class="form-label">Name <span class="text-danger">*</span></label>
      <input id="name" class="form-control" formControlName="name" required />
    </div>
    <div class="mb-3">
      <label for="description" class="form-label">Description <span class="text-danger">*</span></label>
      <editor
        id="description"
        formControlName="description"
        licenseKey="gpl"
        [init]="tinymceConfig"
        
      ></editor>
    </div>
    <div class="mb-3">
      <label for="logo" class="form-label">Logo</label>
      <input type="file" class="form-control" (change)="onLogoChange($event)" accept="image/*" />
      <img *ngIf="logoPreview" [src]="logoPreview" class="mt-2" style="max-width:120px;max-height:120px;object-fit:cover;" />
    </div>
    <div class="mb-3">
      <label for="companyType" class="form-label">Company Type <span class="text-danger">*</span></label>
      <select id="companyType" class="form-select" formControlName="companyType" required>
        <option value="FPO">FPO</option>
        <option value="Other">Other</option>
      </select>
    </div>
    <div class="mb-3">
      <label class="form-label">Categories <span class="text-danger">*</span></label>
      <div class="d-flex flex-wrap gap-2 card card-body">
        <ng-container *ngFor="let cat of categories">
          <div class="form-check">
            <input class="form-check-input" type="checkbox" [id]="'cat-' + cat.id" [checked]="form.value.category_ids.includes(cat.id)" (change)="onCategoryToggle(cat.id, $event)" />
            <label class="form-check-label" [for]="'cat-' + cat.id">{{ cat.names?.en }}</label>
          </div>
        </ng-container>
      </div>
    </div>
    <div class="mb-3">
      <label class="form-label">Languages <span class="text-danger">*</span></label>
      <div class="d-flex flex-wrap gap-2 card card-body">
        <ng-container *ngFor="let lang of languages">
          <div class="form-check">
            <input class="form-check-input" type="checkbox" [id]="'lang-' + lang.id" [checked]="form.value.language_ids.includes(lang.id)" (change)="onLanguageToggle(lang.id, $event)" />
            <label class="form-check-label" [for]="'lang-' + lang.id">{{ lang.name }}</label>
          </div>
        </ng-container>
      </div>
    </div>
    <div class="mb-3">
      <label class="form-label">Media (Images & Videos)</label>
      <input type="file" class="form-control" multiple accept="image/*,video/*" (change)="onMediaChange($event)" />
      <div class="mt-2 d-flex flex-wrap gap-2">
        <ng-container *ngFor="let img of imagePreviews">
          <img [src]="img" class="rounded border" style="max-width:80px;max-height:80px;object-fit:cover;" />
        </ng-container>
        <ng-container *ngFor="let vid of videoPreviews">
          <video [src]="vid" class="rounded border" style="max-width:80px;max-height:80px;object-fit:cover;" controls></video>
        </ng-container>
      </div>
      <div *ngIf="uploadingImages" class="text-info small mt-1">Uploading images... {{ imageUploadProgress }}%</div>
      <div *ngIf="uploadingVideos" class="text-info small mt-1">Uploading videos... {{ videoUploadProgress }}%</div>
    </div>
    <button type="submit" class="btn btn-primary mt-3 w-100">Submit</button>
  </form>
</div>
