<div class="container py-4">
  <div class="row justify-content-center">
    <div class="col-md-8 col-lg-6">
      <div class="card shadow-sm mb-4">
        <div class="card-body text-center">
          <div class="mb-3 position-relative d-inline-block">
            <img [src]="user?.profilePicture || 'https://ui-avatars.com/api/?name=' + (user?.firstName || '') + '+' + (user?.lastName || '')" class="rounded-circle border" style="width: 100px; height: 100px; object-fit: cover;">
            <button type="button" class="btn btn-light btn-sm position-absolute top-0 end-0 p-1 px-2 border shadow" style="border-radius: 50%;" (click)="triggerFileInput()" aria-label="Change profile picture">
              <i class="bi bi-pencil-fill"></i>
            </button>
            <input type="file" #fileInput accept="image/*" class="d-none" (change)="onProfilePicChange($event)">
          </div>
          <form [formGroup]="profileForm" (ngSubmit)="onUpdateProfile()">
            <div class="row g-3">
              <div class="col-6">
                <label class="form-label">First Name</label>
                <input class="form-control" formControlName="firstName">
              </div>
              <div class="col-6">
                <label class="form-label">Last Name</label>
                <input class="form-control" formControlName="lastName">
              </div>
              <div class="col-12">
                <label class="form-label">Email</label>
                <input class="form-control" formControlName="email">
              </div>
              <div class="col-12">
                <label class="form-label">Mobile</label>
                <input class="form-control" formControlName="mobile" [disabled]="true">
              </div>
            </div>
            <button type="submit" class="btn btn-primary mt-3 w-100">Update Profile</button>
          </form>
        </div>
      </div>
      <div class="card shadow-sm mb-4">
        <div class="card-body">
          <div class="d-flex justify-content-between align-items-center mb-3">
            <h5 class="mb-0">My Languages</h5>
            <button class="btn btn-outline-success" (click)="onUpdatePreferences()"><i class="bi bi-pencil-fill"></i></button>
          </div>
          <ul class="list-group mb-3">
            <li class="list-group-item" *ngFor="let lang of languages">{{ lang.name }}</li>
          </ul>
          <div class="d-flex justify-content-between align-items-center mb-3">
            <h5 class="mb-0">My Categories</h5>
            <button class="btn btn-outline-success" (click)="onUpdatePreferences()"><i class="bi bi-pencil-fill"></i></button>
          </div>
          <ul class="list-group mb-3">
            <li class="list-group-item" *ngFor="let cat of categories">{{ cat.names?.en }}</li>
          </ul>
        </div>
      </div>
      <div class="card shadow-sm mb-4">
        <div class="card-body">
          <h5 class="mb-3">Important Details</h5>
          <ul class="list-group mb-3">
            <li class="list-group-item"><strong>Profile Status:</strong> {{ user?.profileSubscriptionStatus }}</li>
            <li class="list-group-item"><strong>Referral Code:</strong> {{ user?.referralCode }}</li>
            <li class="list-group-item"><strong>Points Earned:</strong> {{ user?.pointsEarned }}</li>
          </ul>
          <div *ngIf="user?.referralCode" class="mt-3">
            <label class="form-label">Share your referral link:</label>
            <div class="input-group">
              <input class="form-control" [value]="referralUrl" readonly>
              <button type="button" class="btn btn-outline-primary" (click)="copyReferralUrl()">Share</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
